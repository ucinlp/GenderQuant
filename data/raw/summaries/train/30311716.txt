When Greg and his family attend a party at a roller rink, he reunites with his best friend Rowley and classmates Fregley and Chirag. He meets Holly Hills, who immediately becomes his love interest. Greg's manipulative older brother Rodrick tricks Greg into trying to skate with her and starts persuading violent teenagers to enter the rink. Their mother and father misunderstand and humiliate him by speaking to him on the public address/DJ system and carrying him off the rink. Afterwards, Mom has noticed that the boys haven't been getting along so she devises "Mom Bucks" to pay them if they spend time together where they can trade in for one real dollar, but this unwittingly makes things worse. Meanwhile, Greg and Rowley try to make a funny YouTube video by Rowley lip-synching to "Tik Tok" by Kesha while wearing underwear on his head. Unfortunately  it proves to be awful, getting only 4 hits. At school, Greg sees an empty seat next to Holly, but argues over it with his nemesis, Patty Ferrell. After their teacher hears that Greg is related to Rodrick, a former student in that class, he orders Greg to sit in the front of class. When a talent show is advertised on TV, the brothers see this as a big opportunity â€“ Rowley suggests that he and Greg perform magic tricks, but Greg rejects the idea whilst Rodrick sees this as his band's big break. On Sunday, the Heffley family goes to church but Greg is extremely reluctant to go inside, as a melted 3 Musketeers chocolate bar, intentionally placed on his seat by Rodrick, has stained his trousers. Greg's mom uses her blouse to cover up the stain, but the cover-up backfires when Rodrick exposes Greg's pants. The boys ultimately end up in a scuffle on the floor and as punishment, they are to spend a whole weekend together to bond, while their parents leave to go to Rockin' Rapids. Against his parents' orders, Rodrick hosts a party at the house and locks Greg in the basement. Rowley comes to "save" Greg, but Rodrick locks him in the basement as well, until a call from their mother results in Rodrick letting the two out, in return for their silence on the matter. The next day, the two get a call from their mom, informing them that Manny is sick and they are returning early from their trip. The house is trashed, and the boys only have an hour to clean it up and erase all evidence of the party before their parents arrive home. When they see that one of the partygoers wrote "Rodrick Rules" on the bathroom door in permanent marker, they replace the door with a different one. Afterwards, Greg realizes that the new door does not have a lock, while the old one did. When their mother notices this, she confronts both boys individually. Greg confesses, but in order to prevent Rodrick from getting angry at him, he says the party was only a band rehearsal, and the two escape punishment. Rodrick thinks that Greg denied everything, and the brothers become friends. He shows Greg that he has boxes of the same play money their mom gives them for Mom Bucks and tells him "Rodrick's Rules". When Greg has an assignment, Rodrick tells him he had exactly the same assignment when he was in that class. Greg knew that his dad unknowingly wrote many of Rodrick's assignments for him, but when in class he reads Rodrick's "100 Years Ago" assignment, his teacher knows it is Rodrick's paper and gives him an "F ". Rodrick explains that his dad wrote his papers because of the "100 Years Ago" paper After playing a game of soccer during Phys Ed, Greg then finds a note from Holly Hills in his locker, and he goes to her art room as appointed in the letter, only to find Chirag, who has dressed up as Holly to trick Greg in revenge for Greg pretending he was invisible. In the hallway, Holly passes by and greets Greg as Fregley, which upsets Greg. At lunch, he eats a corndog that Chirag is holding as the Invisible Chirag joke is in the entire Westmore Middle School cafeteria and surrounding rooms by now. Meanwhile, Rowley comes for a sleepover with the Heffleys, and they watch a horror movie called "The Foot". After the movie, Greg and Rowley become paranoid about the killer coming for them. Then Rodrick gives them a ride in the back of his van only to talk about his band's new song, Exploded Diaper, performing at the talent show which was the same one as the one that was advertised on TV and he tries to give them "brain damage" by finding every speed bump in Westmore. The boys go out for a night of fun, getting smoothies and pranking unsuspecting people. However, one prank goes too far and Coach Malone chases them into a mall. They escape by tricking him and return home laughing, only to find that their father has inadvertently come across photos of the party that Rodrick threw. Greg is grounded for two weeks with no video games, and Rodrick is grounded for a month and is not allowed to participate in the talent show. Greg tries to apologize but Rodrick, realizing that Greg had lied to him, only says that they are no longer friends and they return to being rivals. The boys spend the weekend with their grandfather in his retirement home Leisure Village, where Greg encounters Holly, who is visiting her grandmother. Holly apologizes to Greg for calling him Fregley, and Greg learns that Holly has a mean older sister and a spoiled little sister, just as Greg has a mean older brother and a spoiled little brother. Before going to sleep, Greg writes in his diary his feelings about Holly Hills; Rodrick gets possession of the diary and reads it aloud, which wakes Greg up. Rodrick then threatens to tell Holly Hills and runs towards the lobby to do so. Greg chases after Rodrick in his underwear and manages to snatch away the diary. He runs to the bathroom, rips out 2 pages from the diary, and flushes them down the toilet. He discovers he is in the ladies' bathroom, but manages to escape the mob of angry women who think he is a "peeping tom". However, he finds that Rodrick caught everything on tape via security camera and is threatening to show it to everyone. At the talent show a few nights later, Rowley's magic performance is unable to take place, as his eight-year-old assistant Scotty gets stage fright. Greg's mom suggests that Greg will do the show with Rowley, but Greg refuses, saying that he will look humiliated. When Rodrick goes to his band, Greg follows and watches Rodrick's band member, Bill Walter, kick him out of the band he created. Greg bargains with his mom to allow Rodrick to perform; in exchange, he will perform with Rowley, which his mom accepts. Rodrick thanks their mom, sees Greg, and nods at him for letting him play. During a guitar solo, Rodrick kicks Bill out of the band. The magic show is a hit with the audience and Holly meets Greg and Rowley backstage to tell him she loved their show. However, Patty Farrell says it was "pathetic". Rodrick and his band perform but the crowd is not impressed until they see Greg's mom dancing, and start to dance along. Greg is happy for finally having fixed the problems with his family. Rodrick drives Greg to school, as the boys have now forgiven each other. Rodrick also gives him a tape containing that "embarrassing moment" at Leisure Towers. The boys then create a new friendship, realizing it is fun to have a brother. Later, Greg and Rowely put the video of the talent contest on YouTube and call it "Lame Band with Crazy Mom Dancing" which becomes a huge instant hit. They then hear Rodrick shout "Greg, you are so dead!", and the film closes.