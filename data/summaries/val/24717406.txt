11-year-old Greg Heffley  is anxious to start middle school, confident he will easily become the school's most popular kid. However, Greg worries about how his "uncool and embarrassing" best friend, Rowley Jefferson , will fit in. While Rowley is a good friend who helps Greg escape his terrorizing older brother, Rodrick , Greg worries that Rowley's "dorky" clothes and personality will embarrass both of them. On their first day, Greg and Rowley meet Angie Steadman , a seventh grader who works for the school's paper. Throughout the school year, Angie gives Greg and Rowley information about the workings of middle school, which she believes was created to store kids while they make the awkward transition between children to teenagers. Classmate Chirag Gupta  tells Greg and Rowley the story behind the moldy slice of Swiss cheese laying on the school's basketball court; upon touching the cheese, a student named Darren Walsh  contracted the Cheese Touch and caused the 1st Cheese Touch Apocalypse; anyone who touches the cheese will create chaos and they pass on the Cheese Touch by touching someone else. The Cheese Touch eventually got taken away by a German exchange student named Dieter Müller, who moved back to Düsseldorf over the Summer and took the Cheese Touch with him. Greg is determined to be voted a "class favorite" and listed in the yearbook, but each of his attempts to do so backfires. His popularity quickly drops as he loses to Patty Farrell , Greg's archenemy, and Fregley , the weirdest and 201st most popular  kid in school, in scholastic wrestling ; making Greg the 72nd most popular kid in school. Greg angers teenagers on Halloween night by threatening to call the police on them after they spray him and Rowley with a fire extinguisher, and then damages their eight-generation Ford F150 pickup truck with a weed whacker; Greg joins the geeky Safety Patrol with Rowley; and breaks Rowley's left hand during winter vacation during a game Greg invented with his Big Wheel. At school, everyone notices Rowley's broken hand and Rowley becomes very popular, much to Greg's dismay. Rowley's popularity increases when he beats Greg to become the school paper's cartoonist, despite Greg's dismissal of his ideas. Greg and Rowley's friendship falls apart after Greg allows Rowley to take the blame for a mistake Greg made during Safety Patrol. Since Rowley couldn't get his cast wet in the rain, Greg had to walk the kids home, but panicked and began to push the kids into a hole upon seeing a truck similar to the one the teenagers he and Rowley had angered on Halloween. It turned out that it was just a middle-aged man, and Mrs. Irvine mistakes Greg for Rowley, as Greg had borrowed Rowley's coat. Greg ditches the kindergarteners and Mrs. Irvine calls Mr. Winsky. Mr. Winsky suspends Rowley from Safety Patrol, and forces him to apologize to the kindergarteners, even though he has no idea of what happened. A few days later, Greg tells Rowley the truth and tries to tell it as a joke, but Rowley berates him for being a bad friend who cares about nothing but himself. When Mr. Winsky, the Safety Patrol teacher, hears what had actually happened from the kindergarteners, he decides to relieve Greg of his duties and promotes Rowley as the captain. Rowley then leaves and breaks up with Greg and befriends a kid named Collin Lee . Greg tries to move on by having a sleep over with Fregley, but Fregley's sugar-induced hyperactivity is too much for him to take so he hides in the bathroom. Later that night, Fregley slips a piece of paper under the bathroom door and after reading the note Greg passes out and is later taken home by his father. He then tries to pursue popularity without Rowley by auditioning for the school play of The Wizard of Oz, but the performance is ruined by Patty Farrel when she throws a huge temper tantrum at Greg when he does not sing and blames him for the play being ruined. As a result of this, Greg throws an apple at her resulting an apple-throwing fight in the middle of the performance, making Greg the 202nd most popular kid. At the school mother-son dance, Greg's mother  suggests Greg ask Rowley to go out for ice cream with them. However, after Rowley and his Mom danced, Collin tells Greg that he and Rowley already have plans. Later, Greg is excited when Rowley comes up to him in school, but is disappointed when he learns Rowley only wants a video game back. Greg refuses to return the game, causing them to get into an argument and the kids gather around them, wanting them to fight, but are quickly dispelled when the teenagers that Greg and Rowley had angered on Halloween drive up, looking for revenge. The teenagers find the Cheese and make Rowley eat it. They are about to force Greg to eat the cheese when Coach Malone arrives, leading the teenagers to run away. The children return and find the partially eaten cheese. Patty begins to accuse Rowley for causing the 2nd Cheese Touch Apocalypse, but Greg steps in and takes the blame. He picks up the cheese and makes a profound speech about the ridiculousness of the cheese and other middle school institutions, but it is ruined when Patty realizes that Greg has the Cheese Touch, causing everyone to run away from Greg. Greg and Rowley reconcile, and Angie approaches them to compliment Greg for his bravery. The film ends with Greg, Rowley, and Angie laughing after Patty hugged Rowley and contracted the Cheese Touch, and Greg narrating that he still has the summer and next year ahead of him. Greg finally achieves his dream of being made a class favorite along with Rowley as both being made the cutest friends.